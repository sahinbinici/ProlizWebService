# Server configuration
server.port=8080
server.servlet.context-path=/ProlizWebServices

# Logging Configuration
# PRODUCTION'da TRACE level'ları INFO/WARN yapmalısınız!
logging.level.com.prolizwebservices=${LOG_LEVEL_APP:INFO}
logging.level.com.prolizwebservices.client=${LOG_LEVEL_CLIENT:TRACE}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:WARN}
logging.level.org.apache.http=${LOG_LEVEL_HTTP:WARN}
logging.level.root=WARN

# Log pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Log file configuration
logging.file.name=logs/proliz-web-services.log
logging.file.max-size=10MB
logging.file.max-history=30

# Connection timeout settings
spring.mvc.async.request-timeout=30000

# SOAP Service Configuration
# Web servisi için kimlik doğrulama ayarları (Environment Variables'dan alınır)
# Production'da mutlaka environment variables kullanın!
soap.service.username=ProLmsGan
soap.service.password=-2020+Pro*Gan#

# Web servisi bağlantı ayarları
soap.service.url=${SOAP_SERVICE_URL:https://obs.gantep.edu.tr/proliz_obs_lms_miner/proliz_obs_lms_miner.asmx}
soap.service.timeout.connect=${SOAP_TIMEOUT_CONNECT:10000}
soap.service.timeout.read=${SOAP_TIMEOUT_READ:30000}
soap.service.retry.enabled=${SOAP_RETRY_ENABLED:true}
soap.service.retry.max-attempts=${SOAP_RETRY_MAX:3}

# Cache Performans Ayarları - YENİ STRATELJİ: PROGRESSIVE LOADING
# Hızlı startup + Arka plan yükleme
# Startup'ta sadece 100 ders yüklenir (hızlı başlatma)
cache.preload.initial-courses=${CACHE_INITIAL:100}
# Arka plan yükleme aktif
cache.progressive.enabled=${CACHE_PROGRESSIVE:true}
# Her batch'te 50 ders
cache.progressive.batch-size=${CACHE_BATCH_SIZE:50}
# 5 dakikada bir batch çalışır
cache.progressive.interval-minutes=${CACHE_INTERVAL:5}
# 30ms rate limit (hızlı batch için)
cache.progressive.rate-limit-ms=${CACHE_RATE_LIMIT:30}
# Batch başına maksimum hata sayısı
cache.progressive.max-errors=${CACHE_MAX_ERRORS:20}

# Async/Paralel İşlem Ayarları
# SOAP çağrıları için thread pool ayarları
async.soap.core-pool-size=${ASYNC_SOAP_CORE:10}
async.soap.max-pool-size=${ASYNC_SOAP_MAX:25}
async.soap.queue-capacity=${ASYNC_SOAP_QUEUE:100}
async.soap.keep-alive-seconds=${ASYNC_SOAP_KEEPALIVE:60}

# SSL/TLS Güvenlik Ayarları
server.ssl.enabled=false
server.ssl.key-store-type=PKCS12
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=changeit
# server.ssl.key-alias=proliz

# SpringDoc OpenAPI (Swagger) Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.displayRequestDuration=true
springdoc.swagger-ui.defaultModelsExpandDepth=1
springdoc.swagger-ui.defaultModelExpandDepth=1
springdoc.swagger-ui.displayOperationId=false

# Show all endpoints in single view - no grouping
# springdoc.group-configs disabled to show all endpoints

# Content Negotiation - Fix for Swagger XML/JSON issue
spring.mvc.contentnegotiation.favor-parameter=false
spring.mvc.contentnegotiation.favor-path-extension=false
spring.mvc.contentnegotiation.media-types.xml=application/xml
spring.mvc.contentnegotiation.media-types.json=application/json
